<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate PLR Analysis Tool - Professional Edition</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gold-gradient: linear-gradient(45deg, #ffd700, #ffed4e);
            --success-color: #4CAF50;
            --warning-color: #ff9800;
            --danger-color: #f44336;
            --info-color: #2196F3;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--primary-gradient);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.2);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: var(--primary-gradient);
            border-radius: 15px;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: shimmer 3s ease-in-out infinite;
        }
        
        @keyframes shimmer {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(180deg); }
        }
        
        .header h1 {
            font-size: 2.8em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1;
        }
        
        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }
        
        .premium-badge {
            display: inline-block;
            background: var(--gold-gradient);
            color: #333;
            padding: 8px 20px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
            position: relative;
            z-index: 1;
        }
        
        .status-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid var(--success-color);
        }
        
        .status-dot {
            width: 12px;
            height: 12px;
            background: var(--success-color);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .control-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .upload-area {
            border: 3px dashed #ddd;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            background: #fafafa;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }
        
        .upload-area:hover {
            border-color: var(--info-color);
            background: #f0f8ff;
            transform: translateY(-2px);
        }
        
        .upload-area.dragover {
            border-color: var(--success-color);
            background: #f0fff0;
        }
        
        .demo-section {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .demo-button, .clear-button {
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 7px;
            position: relative;
        }
        
        .demo-button {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }
        
        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }
        
        .clear-button {
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
        }
        
        .clear-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
        }
        
        .tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 20px;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 15px;
        }
        
        .tab {
            flex: 1;
            min-width: 120px;
            padding: 12px 20px;
            background: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            position: relative;
        }
        
        .tab.active {
            background: var(--primary-gradient);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .tab:hover:not(.active) {
            background: #e9ecef;
            transform: translateY(-1px);
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .results-table th {
            background: var(--primary-gradient);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        
        .results-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }
        
        .results-table tr:hover {
            background: #f8f9fa;
        }
        
        .score-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }
        
        .score-excellent { background: #d4edda; color: #155724; }
        .score-good { background: #cce7ff; color: #004085; }
        .score-average { background: #fff3cd; color: #856404; }
        .score-poor { background: #f8d7da; color: #721c24; }
        
        .niche-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 11px;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        .niche-health { background: #e8f5e8; color: #2e7d32; }
        .niche-business { background: #e3f2fd; color: #1565c0; }
        .niche-lifestyle { background: #fce4ec; color: #c2185b; }
        .niche-creative { background: #fff3e0; color: #ef6c00; }
        .niche-finance { background: #f3e5f5; color: #7b1fa2; }
        .niche-technology { background: #e0f2f1; color: #00695c; }
        .niche-education { background: #f3e5f5; color: #6a1b9a; }
        .niche-other { background: #f5f5f5; color: #616161; }
        
        .strategy-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        .strategy-upsell { background: #e8f5e8; color: #2e7d32; }
        .strategy-quick { background: #e3f2fd; color: #1565c0; }
        .strategy-premium { background: #fff3e0; color: #ef6c00; }
        .strategy-bundle { background: #fce4ec; color: #c2185b; }
        .strategy-template { background: #f3e5f5; color: #7b1fa2; }
        
        .metric-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            text-align: center;
            border-left: 4px solid var(--info-color);
        }
        
        .metric-value {
            font-size: 2.5em;
            font-weight: bold;
            color: var(--info-color);
            margin-bottom: 5px;
        }
        
        .metric-label {
            color: #666;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .export-section {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
        }
        
        .export-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
        }
        
        .export-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            position: relative;
        }
        
        .export-btn.pdf { background: #dc3545; color: white; }
        .export-btn.excel { background: #28a745; color: white; }
        .export-btn.csv { background: #007bff; color: white; }
        .export-btn.report { background: #6f42c1; color: white; }
        
        .export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .analysis-summary {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .summary-item {
            text-align: center;
        }
        
        .summary-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .recommendation-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .recommendation-box h4 {
            color: #856404;
            margin-bottom: 10px;
        }
        
        .details-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 600px;
            width: 90%;
            max-height: 80%;
            overflow-y: auto;
        }
        
        .close-modal {
            float: right;
            font-size: 2em;
            cursor: pointer;
            color: #999;
        }
        
        .close-modal:hover {
            color: #333;
        }
        
        .tooltip {
            position: fixed;
            background: rgba(0,0,0,0.95);
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            font-size: 0.9em;
            max-width: 450px;
            min-width: 280px;
            width: auto;
            z-index: 10000;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.2s ease;
            pointer-events: none;
            white-space: normal;
            word-wrap: break-word;
            word-break: break-word;
            line-height: 1.6;
            box-shadow: 0 6px 25px rgba(0,0,0,0.4);
            border: 1px solid rgba(255,255,255,0.2);
            max-height: 500px;
            overflow-y: auto;
            display: block;
        }
        
        .tooltip.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .tooltip::after {
            content: '';
            position: absolute;
            border: 6px solid;
            border-color: rgba(0,0,0,0.95) transparent transparent transparent;
            top: 100%;
            left: 20px;
        }
        
        .tooltip.tooltip-bottom::after {
            top: -12px;
            border-color: transparent transparent rgba(0,0,0,0.95) transparent;
        }
        
        .hidden-section {
            display: none !important;
        }

        .keyword-tag {
            background: var(--primary-gradient);
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            margin: 5px;
            display: inline-block;
            font-size: 0.9em;
        }

        .keyword-tag.high-volume {
            background: var(--success-color);
        }

        .keyword-tag.long-tail {
            background: var(--info-color);
        }

        .keyword-tag.etsy-tag {
            background: #d35400;
        }

        .competition-indicator {
            padding: 5px 10px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .competition-low { background: #d4edda; color: #155724; }
        .competition-medium { background: #fff3cd; color: #856404; }
        .competition-high { background: #f8d7da; color: #721c24; }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
                margin: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                min-width: auto;
            }
            
            .control-panel {
                grid-template-columns: 1fr;
            }
            
            .demo-button, .clear-button {
                display: block;
                margin: 10px auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🚀 Ultimate PLR Analysis Tool</h1>
            <div class="subtitle">Professional Market Research & Profit Optimization Suite</div>
            <span class="premium-badge">💎 PREMIUM EDITION</span>
        </div>
        
        <div class="status-indicator">
            <div class="status-dot"></div>
            <span><strong>System Status:</strong> Ready for Professional Analysis</span>
            <span id="fileCount">0 PLR files analyzed with market intelligence</span>
        </div>
        <div class="demo-section">
            <button class="demo-button" onclick="loadUltimateDemo()" data-tooltip="Load sample PLR data to test all features.<br><br>This will populate the tool with 5 professional PLR packages to demonstrate analysis capabilities.">
                ⚡ Load Ultimate Demo
            </button>
            <button class="clear-button" onclick="clearAllData()" data-tooltip="Remove all analyzed data and reset tool.<br><br>This will clear all uploaded files and analysis results, returning to the initial state.">
                🗑️ Clear Data
            </button>
            <p style="margin-top: 10px; color: #666;">Experience the full power of professional PLR analysis</p>
        </div>
        
        <div class="control-panel">
            <div class="upload-area" id="uploadArea" data-tooltip="Upload PLR files for comprehensive analysis.<br><br>Supported formats:<br>• PDF documents<br>• DOC/DOCX files<br>• TXT plain text<br>• ZIP archives<br><br>You can upload multiple files at once.">
                <div style="font-size: 2em; margin-bottom: 10px;">📁</div>
                <h3>Upload PLR Content</h3>
                <p>Drag & drop files or click to browse</p>
                <p style="font-size: 0.9em; color: #666; margin-top: 10px;">
                    Supports: PDF, DOC, TXT, ZIP (Multiple files)
                </p>
                <input type="file" id="fileInput" multiple accept=".pdf,.doc,.docx,.txt,.zip" style="display: none;">
            </div>
            
            <div style="padding: 20px; background: #f8f9fa; border-radius: 15px;">
                <h3 style="margin-bottom: 15px;">Analysis Options</h3>
                
                <label style="display: block; margin-bottom: 10px;" data-tooltip="Market Intelligence Analysis<br><br>Analyzes:<br>• Market demand levels<br>• Competition analysis<br>• Search volume data<br>• Pricing benchmarks<br>• Target audience insights">
                    <input type="checkbox" id="marketIntelligence" checked> Market Intelligence
                </label>
                <label style="display: block; margin-bottom: 10px;" data-tooltip="Quality Assessment Review<br><br>Evaluates:<br>• Content structure & flow<br>• Originality percentage<br>• Readability scores<br>• Professional standards<br>• Improvement recommendations">
                    <input type="checkbox" id="qualityAssessment" checked> Quality Assessment
                </label>
                <label style="display: block; margin-bottom: 10px;" data-tooltip="Profit Optimization Calculator<br><br>Calculates:<br>• Revenue projections<br>• Optimal pricing strategies<br>• ROI estimates<br>• Sales volume predictions<br>• Profit maximization tactics">
                    <input type="checkbox" id="profitOptimization" checked> Profit Optimization
                </label>
                <label style="display: block; margin-bottom: 10px;" data-tooltip="Bundle Strategy Generator<br><br>Creates:<br>• Package combinations<br>• Pricing tier recommendations<br>• Revenue multipliers<br>• Value stacking methods<br>• Upsell opportunities">
                    <input type="checkbox" id="bundleStrategies" checked> Bundle Strategies
                </label>
                <label style="display: block; margin-bottom: 10px;" data-tooltip="AI-Powered Title Optimization<br><br>Generates:<br>• High-converting titles<br>• SEO-optimized headlines<br>• Market-tested phrases<br>• Emotional triggers<br>• Click-worthy descriptions">
                    <input type="checkbox" id="aiTitleGeneration" checked> AI Title Generation
                </label>
                <label style="display: block; margin-bottom: 10px;" data-tooltip="Etsy SEO Keyword Research<br><br>Provides:<br>• Trending keywords<br>• Long-tail suggestions<br>• Optimization tips<br>• Tag recommendations<br>• Competition analysis">
                    <input type="checkbox" id="etsySEO" checked> Etsy SEO Keywords
                </label>
                <label style="display: block; margin-bottom: 10px;" data-tooltip="Competitor Price Tracking<br><br>Monitors:<br>• Market pricing trends<br>• Competitor analysis<br>• Price gap opportunities<br>• Saturation levels<br>• Pricing recommendations">
                    <input type="checkbox" id="competitorTracking" checked> Competitor Tracking
                </label>
                
                <button onclick="startAnalysis()" style="width: 100%; padding: 10px; background: var(--info-color); color: white; border: none; border-radius: 8px; margin-top: 15px; cursor: pointer;" data-tooltip="Begin comprehensive analysis process.<br><br>This will process all uploaded files using your selected analysis options and generate detailed reports.">
                    🔄 Start Analysis
                </button>
            </div>
        </div>
        
        <div class="tabs">
            <button class="tab active" onclick="showTab('overview')" data-tooltip="Analysis Overview Dashboard<br><br>Shows:<br>• Key performance metrics<br>• Summary statistics<br>• Complete results table<br>• Overall recommendations">📊 Overview</button>
            <button class="tab" onclick="showTab('quality')" data-tooltip="Quality Assessment Report<br><br>Displays:<br>• Content quality scores<br>• Originality percentages<br>• Readability analysis<br>• Improvement suggestions">⭐ Quality</button>
            <button class="tab" onclick="showTab('market')" data-tooltip="Market Intelligence Analysis<br><br>Provides:<br>• Competition analysis<br>• Search volume data<br>• Price benchmarking<br>• Target audience insights">📈 Market</button>
            <button class="tab" onclick="showTab('profit')" data-tooltip="Profit Optimization Center<br><br>Calculates:<br>• Revenue projections<br>• ROI estimates<br>• Pricing strategies<br>• Sales forecasts">💰 Profit</button>
            <button class="tab" onclick="showTab('bundle')" data-tooltip="Bundle Strategy Generator<br><br>Creates:<br>• Package recommendations<br>• Pricing tiers<br>• Revenue multipliers<br>• Upsell strategies">📦 Bundle</button>
            <button class="tab" onclick="showTab('optimize')" data-tooltip="AI Optimization Suite<br><br>Generates:<br>• Title suggestions<br>• Quick-win actions<br>• Marketing improvements<br>• Conversion boosters">🚀 Optimize</button>
            <button class="tab" onclick="showTab('keywords')" data-tooltip="Etsy SEO Keyword Generator<br><br>Provides:<br>• Trending keywords<br>• Competition analysis<br>• Title optimization<br>• Tag suggestions">🔍 Keywords</button>
            <button class="tab" onclick="showTab('competitors')" data-tooltip="Competitor Price Tracking<br><br>Shows:<br>• Market pricing<br>• Price gaps<br>• Opportunity alerts<br>• Saturation levels">📊 Competition</button>
        </div>
        <div id="overview" class="tab-content active">
            <div class="analysis-summary">
                <h3 style="text-align: center; margin-bottom: 20px;">Ultimate Analysis Dashboard</h3>
                <div class="summary-grid">
                    <div class="summary-item">
                        <div class="summary-icon">📊</div>
                        <h4>Market Score</h4>
                        <div id="overallMarketScore" style="font-size: 1.5em; color: var(--success-color); font-weight: bold;">0/100</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-icon">💰</div>
                        <h4>Profit Potential</h4>
                        <div id="overallProfit" style="font-size: 1.5em; color: var(--success-color); font-weight: bold;">$0</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-icon">⚡</div>
                        <h4>Quick Wins</h4>
                        <div id="quickWins" style="font-size: 1.5em; color: var(--info-color); font-weight: bold;">0 Found</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-icon">🎯</div>
                        <h4>Optimization</h4>
                        <div id="optimizationLevel" style="font-size: 1.5em; color: var(--warning-color); font-weight: bold;">None</div>
                    </div>
                </div>
            </div>
            
            <table class="results-table" id="resultsTable">
                <thead>
                    <tr>
                        <th>PLR Content</th>
                        <th>Niche</th>
                        <th>Strategy</th>
                        <th data-tooltip="MARKET SCORE: Rated 0-100 based on search volume, competition level, and profit potential. Higher scores indicate better market opportunities and easier sales potential.">Market Score</th>
                        <th data-tooltip="QUALITY RATING: Content assessment based on readability, originality, formatting, and market value. Higher ratings mean less editing required and better customer satisfaction.">Quality Rating</th>
                        <th data-tooltip="PROFIT POTENTIAL: Estimated revenue opportunity based on market demand, competition analysis, and pricing research. Shows suggested selling price and expected monthly earnings.">Profit Potential</th>
                        <th data-tooltip="BEST STRATEGY: Recommended approach for maximum profitability - either Quick Launch for fast revenue, or Upsell Package for higher long-term profits.">Best Strategy</th>
                        <th data-tooltip="ACTION: Next steps to implement this PLR product. Details button provides comprehensive implementation guide with specific steps and timelines.">Action</th>
                    </tr>
                </thead>
                <tbody id="resultsBody">
                    <tr>
                        <td colspan="8" style="text-align: center; padding: 40px; color: #666;">
                            📋 Upload PLR content or load demo to see professional analysis
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div id="quality" class="tab-content quality-section">
            <h3>🔍 Quality Assessment Matrix</h3>
            <div class="metric-cards">
                <div class="metric-card">
                    <div class="metric-value" id="contentQuality">85</div>
                    <div class="metric-label">Content Quality</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="originalityScore">92%</div>
                    <div class="metric-label">Originality</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="readabilityGrade">7.2</div>
                    <div class="metric-label">Readability Grade</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="keywordDensity">3.8%</div>
                    <div class="metric-label">Keyword Density</div>
                </div>
            </div>
            
            <div class="recommendation-box">
                <h4>💡 Quality Recommendations</h4>
                <ul id="qualityRecommendations" style="margin-left: 20px;">
                    <li>Content shows excellent structure and readability scores</li>
                    <li>Originality rating of 92% indicates high-quality, unique content</li>
                    <li>Keyword density is well-optimized for search engines</li>
                    <li>Consider adding more visual elements to enhance engagement</li>
                    <li>Overall quality qualifies for premium pricing strategy</li>
                </ul>
            </div>
        </div>
        
        <div id="market" class="tab-content market-section">
            <h3>📈 Market Intelligence Report</h3>
            <div class="metric-cards">
                <div class="metric-card">
                    <div class="metric-value" id="avgMarketPrice">$0</div>
                    <div class="metric-label">Avg Market Price</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="monthlySearches">0</div>
                    <div class="metric-label">Monthly Searches</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="marketDemand">0%</</div>
                    <div class="metric-label">Market Demand</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="competitionScore">0</div>
                    <div class="metric-label">Competition Score</div>
                </div>
            </div>
            
            <div style="background: white; padding: 20px; border-radius: 15px; margin: 20px 0;">
                <h4>🎯 Target Market Analysis</h4>
                <div id="targetAudience" style="margin: 15px 0;">
                    <strong>Primary Audience:</strong> Upload content for analysis
                </div>
                <div id="priceRange" style="margin: 15px 0;">
                    <strong>Price Range:</strong> Upload content for recommendations
                </div>
                <div id="bestPlatforms" style="margin: 15px 0;">
                    <strong>Best Platforms:</strong> Upload content for platform analysis
                </div>
            </div>
        </div>
        
        <div id="profit" class="tab-content profit-section">
            <h3>💰 Profit Optimization Dashboard</h3>
            <div class="metric-cards">
                <div class="metric-card">
                    <div class="metric-value" id="monthlyPotential">$0</div>
                    <div class="metric-label">Monthly Potential</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="roiProjection">0%</div>
                    <div class="metric-label">ROI Projection</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="optimalPrice">$0</div>
                    <div class="metric-label">Optimal Price</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="unitsPerMonth">0</div>
                    <div class="metric-label">Units/Month</div>
                </div>
            </div>
            
            <!-- PLR/MRR PROFIT CALCULATOR -->
            <div style="background: white; padding: 25px; border-radius: 15px; margin: 20px 0; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                <h4 style="color: #667eea; margin-bottom: 20px; font-size: 1.3em;">🧮 PLR/MRR Profit Calculator</h4>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: 500;">PLR Product:</label>
                        <select id="calcProductSelect" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
                            <option value="">Select a product</option>
                        </select>
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: 500;">PLR Cost ($):</label>
                        <input type="number" id="calcPLRCost" placeholder="10" min="0" step="0.01" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: 500;">Selling Price ($):</label>
                        <input type="number" id="calcSellingPrice" placeholder="47" min="0" step="0.01" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: 500;">Monthly Sales:</label>
                        <input type="number" id="calcMonthlySales" placeholder="20" min="0" step="1" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
                    </div>
                </div>
                
                <button onclick="calculatePLRProfit()" style="width: 100%; padding: 12px; background: linear-gradient(45deg, #667eea, #764ba2); color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 1.1em;">
                    Calculate Profit
                </button>
                
                <div id="calculatorResults" style="display: none; margin-top: 20px;">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                        <div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 20px; border-radius: 12px; text-align: center;">
                            <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">Monthly Revenue</div>
                            <div id="calcMonthlyRevenue" style="font-size: 2em; font-weight: bold;">$0</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #4CAF50, #45a049); color: white; padding: 20px; border-radius: 12px; text-align: center;">
                            <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">Monthly Profit</div>
                            <div id="calcMonthlyProfit" style="font-size: 2em; font-weight: bold;">$0</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #2196F3, #1976d2); color: white; padding: 20px; border-radius: 12px; text-align: center;">
                            <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">Profit Margin</div>
                            <div id="calcProfitMargin" style="font-size: 2em; font-weight: bold;">0%</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #ff9800, #f57c00); color: white; padding: 20px; border-radius: 12px; text-align: center;">
                            <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">ROI Multiplier</div>
                            <div id="calcROIMultiplier" style="font-size: 2em; font-weight: bold;">0x</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #9c27b0, #7b1fa2); color: white; padding: 20px; border-radius: 12px; text-align: center;">
                            <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">Annual Projection</div>
                            <div id="calcAnnualProjection" style="font-size: 2em; font-weight: bold;">$0</div>
                        </div>
                    </div>
                </div>
            </div>
            <div style="background: white; padding: 20px; border-radius: 15px; margin-top: 20px;">
                <h4>💡 Profit Recommendations</h4>
                <ul id="profitRecommendations" style="margin-left: 20px;">
                    <li>Upload content to generate profit recommendations</li>
                </ul>
            </div>
        </div>
        
        <div id="bundle" class="tab-content bundle-section">
            <h3>📦 Bundle Strategy Generator</h3>
            <div style="background: white; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                <h4>Recommended Bundles</h4>
                <div id="bundleRecommendations">Upload PLR content to generate bundle strategies</div>
            </div>
            <div style="background: white; padding: 20px; border-radius: 15px;">
                <h4>Bundle Pricing Tiers</h4>
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr>
                            <th style="border-bottom: 2px solid #ddd; padding: 10px; text-align: left;">Tier</th>
                            <th style="border-bottom: 2px solid #ddd; padding: 10px; text-align: left;">Contents</th>
                            <th style="border-bottom: 2px solid #ddd; padding: 10px; text-align: left;">Suggested Price</th>
                        </tr>
                    </thead>
                    <tbody id="bundlePricingBody">
                        <tr>
                            <td colspan="3" style="padding: 20px; text-align: center; color: #666;">Upload content to see pricing tiers</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <div id="optimize" class="tab-content optimize-section">
            <h3>🚀 Optimization Center</h3>
            <div style="background: white; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                <h4>AI-Generated Titles</h4>
                <div id="titleSuggestions">Upload content to generate optimized titles</div>
            </div>
            
            <div style="background: white; padding: 20px; border-radius: 15px;">
                <h4>Quick Wins</h4>
                <ul id="quickWinActions" style="margin-left: 20px;">
                    <li>Upload content to generate optimization suggestions</li>
                </ul>
            </div>
        </div>
        <div id="keywords" class="tab-content keywords-section">
            <h3>🔍 Etsy SEO Keyword Generator</h3>
            <div style="background: white; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                <h4>Keyword Suggestions</h4>
                <div id="keywordSuggestions">Upload content to generate keyword suggestions</div>
            </div>
            
            <div style="background: white; padding: 20px; border-radius: 15px;">
                <h4>Tag Recommendations</h4>
                <div id="tagRecommendations">Upload content to generate tag recommendations</div>
            </div>
        </div>
        
        <div id="competitors" class="tab-content competitors-section">
            <h3>📊 Competitor Price Tracking</h3>
            <div style="background: white; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                <h4>Competitor Analysis</h4>
                <div id="competitorAnalysis">Upload content to generate competitor analysis</div>
            </div>
            
            <div style="background: white; padding: 20px; border-radius: 15px;">
                <h4>Price Tracking</h4>
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr>
                            <th style="border-bottom: 2px solid #ddd; padding: 10px; text-align: left;">Competitor</th>
                            <th style="border-bottom: 2px solid #ddd; padding: 10px; text-align: left;">Product</th>
                            <th style="border-bottom: 2px solid #ddd; padding: 10px; text-align: left;">Price</th>
                            <th style="border-bottom: 2px solid #ddd; padding: 10px; text-align: left;">Competition Level</th>
                        </tr>
                    </thead>
                    <tbody id="competitorPricingBody">
                        <tr>
                            <td colspan="4" style="padding: 20px; text-align: center; color: #666;">Upload content to track competitor pricing</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <div class="export-section">
            <button onclick="exportToCSV()" data-tooltip="Export analysis results to CSV file for Excel or Google Sheets analysis.">📑 Export CSV</button>
            <button onclick="exportToPDF()" data-tooltip="Generate professional PDF report with all analysis results.">📄 Export PDF</button>
            <button onclick="saveBackup()" data-tooltip="Save backup of current analysis for later use.">💾 Save Backup</button>
            <button onclick="loadBackup()" data-tooltip="Load previously saved backup to continue analysis.">📂 Load Backup</button>
        </div>
        
        <!-- MODALS -->
        <div id="detailsModal" class="modal">
            <div class="modal-content">
                <span class="close-modal" onclick="closeModal('detailsModal')">&times;</span>
                <h3>Detailed Analysis</h3>
                <div id="modalContent">Analysis details will appear here.</div>
            </div>
        </div>
        
        <div id="tooltip" class="tooltip"></div>
 <script>
(function () {
  "use strict";
  if (window.__UPAT_STABLE__) return;
  window.__UPAT_STABLE__ = true;

  // ===== State =====
  const state = {
    files: [],
    results: [],
    opts: {
      marketIntelligence: true,
      qualityAssessment: true,
      profitOptimization: true,
      bundleStrategies: true,
      aiTitleGeneration: true,
      etsySEO: true,
      competitorTracking: true
    }
  };

  // ===== DOM helpers =====
  const $  = (s, r=document) => r.querySelector(s);
  const $$ = (s, r=document) => Array.from(r.querySelectorAll(s));
  const on = (el, ev, fn, opts) => el && el.addEventListener(ev, fn, opts);

  const uploadArea  = $("#uploadArea");
  const fileInput   = $("#fileInput");
  const resultsBody = $("#resultsBody");
  const fileCountEl = $("#fileCount");

  // ===== Tabs =====
  window.showTab = function showTab(tabId){
    $$(".tab").forEach(b=>b.classList.remove("active"));
    $$(".tab-content").forEach(c=>c.classList.remove("active"));
    const btn = document.querySelector(`.tab[onclick="showTab('${tabId}')"]`);
    const tab = document.getElementById(tabId);
    if (btn) btn.classList.add("active");
    if (tab) tab.classList.add("active");
  };

  // ===== Tooltips (delegated, robust) =====
  let tip = $("#tooltip");
  if (!tip) {
    tip = document.createElement("div");
    tip.id = "tooltip";
    tip.className = "tooltip";
    document.body.appendChild(tip);
  }
  let tipTarget = null;
  on(document, "mouseover", e => {
    const t = e.target.closest("[data-tooltip]");
    if (!t) { tip.classList.remove("show"); tipTarget = null; return; }
    tipTarget = t;
    tip.innerHTML = t.dataset.tooltip || "";
    tip.classList.add("show");
    tip.style.top  = (e.clientY + 14) + "px";
    tip.style.left = (e.clientX + 14) + "px";
  });
  on(document, "mousemove", e => {
    if (!tipTarget) return;
    tip.style.top  = (e.clientY + 14) + "px";
    tip.style.left = (e.clientX + 14) + "px";
  });
  ["scroll","mouseout"].forEach(ev => on(document, ev, () => {
    tip.classList.remove("show"); tipTarget = null;
  }));

  // ===== Upload wiring with visible file list =====
  let openLock = false;
  on(uploadArea, "click", () => {
    if (openLock) return;
    openLock = true;
    if (fileInput) fileInput.value = "";
    fileInput?.click();
    setTimeout(()=> openLock = false, 300);
  });

  // prevent page nav on drop outside dropzone
  ["dragover","drop"].forEach(ev => on(window, ev, e => e.preventDefault(), {passive:false}));
  on(uploadArea, "dragover", () => uploadArea.classList.add("dragover"));
  on(uploadArea, "dragleave", () => uploadArea.classList.remove("dragover"));
  on(uploadArea, "drop", e => {
    uploadArea.classList.remove("dragover");
    handleFiles(e.dataTransfer.files);
  });
  on(fileInput, "change", () => handleFiles(fileInput.files));

  function handleFiles(list){
    const files = Array.from(list || []).map(f => ({ name:f.name, size:f.size||0, type:f.type||"unknown" }));
    state.files = files;
    updateFileCount();
    renderFileList();
    renderPlaceholderResults();
  }

  function updateFileCount(){
    if (!fileCountEl) return;
    fileCountEl.textContent = `${state.files.length} PLR files analyzed with market intelligence`;
  }

  function renderFileList(){
    // Draw a file list panel directly under the upload area
    let list = document.getElementById("fileList");
    if (!list) {
      list = document.createElement("div");
      list.id = "fileList";
      list.style.marginTop = "12px";
      list.style.fontSize = "0.95em";
      list.style.color = "#333";
      uploadArea?.appendChild(list);
    }
    if (!state.files.length) { list.innerHTML = ""; return; }
    list.innerHTML = `
      <div style="text-align:left">
        <strong>Selected files (${state.files.length}):</strong>
        <ul style="margin:8px 0 0 18px;">
          ${state.files.map(f => `<li>${escapeHTML(f.name)} <span style="color:#888">(${prettyBytes(f.size)})</span></li>`).join("")}
        </ul>
      </div>`;
  }

  function prettyBytes(n){
    if (!n) return "0 B";
    const u = ["B","KB","MB","GB"];
    let i = 0;
    while (n >= 1024 && i < u.length-1){ n/=1024; i++; }
    return `${n.toFixed(1)} ${u[i]}`;
  }

  // ===== Demo + Clear =====
  window.loadUltimateDemo = function(){
    const demo = [
      { name:"Mindfulness Starter Kit.pdf", size:520000, type:"application/pdf" },
      { name:"Keto Meal Planner.docx",      size:260000, type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document" },
      { name:"30-Day Fitness Journal.zip",  size:1020000,type:"application/zip" },
      { name:"Budget Master Tracker.xlsx",  size:190000, type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" },
      { name:"Productivity Cheatsheet.txt", size:22000,  type:"text/plain" }
    ];
    state.files = demo;
    updateFileCount();
    renderFileList();
    renderPlaceholderResults();
  };

  window.clearAllData = function(){
    state.files = [];
    state.results = [];
    updateFileCount();
    renderFileList();
    resultsBody.innerHTML = `
      <tr><td colspan="8" style="text-align:center; padding:40px; color:#666;">
        📋 Upload PLR content or load demo to see professional analysis
      </td></tr>`;
  };

  // ===== Analysis (mock but fully visible) =====
  window.startAnalysis = function(){
    if (!state.files.length) { alert("Please upload files or load the demo first."); return; }
    state.results = state.files.map((f,i) => {
      const market = clamp(55 + ((i*13)%40), 0, 100);
      const quality = clamp(60 + ((f.size%7)*5), 0, 100);
      const profit = "$" + ((15 + ((f.size%11)*7))*10).toFixed(0);
      const strategies = ["Quick","Upsell","Premium","Bundle"];
      const strat = strategies[i % strategies.length];
      return {
        name: f.name,
        niche: guessNiche(f.name),
        strategy: strat,
        marketScore: market,
        qualityRating: quality,
        profitPotential: profit,
        bestStrategy: strat === "Quick" ? "Quick Launch"
                      : strat === "Upsell" ? "Upsell Package"
                      : strat === "Premium" ? "Premium Offer"
                      : "Bundle Play"
      };
    });
    renderResultsTable();
    updateOverviewSummary();
  };

  function clamp(n, a, b){ return Math.min(b, Math.max(a, n)); }
  function guessNiche(name=""){
    const n = name.toLowerCase();
    if (n.includes("keto") || n.includes("fitness")) return "Health";
    if (n.includes("budget") || n.includes("finance")) return "Finance";
    if (n.includes("mindful") || n.includes("journal")) return "Lifestyle";
    return "Business";
  }

  function renderResultsTable(){
    if (!resultsBody) return;
    resultsBody.innerHTML = state.results.map(r => `
      <tr>
        <td>${escapeHTML(r.name)}</td>
        <td><span class="niche-badge niche-${r.niche.toLowerCase()}">${r.niche}</span></td>
        <td><span class="strategy-badge strategy-${r.strategy.toLowerCase()}">${r.strategy}</span></td>
        <td><span class="score-badge ${scoreClass(r.marketScore)}">${r.marketScore}</span></td>
        <td><span class="score-badge ${scoreClass(r.qualityRating)}">${r.qualityRating}</span></td>
        <td>${r.profitPotential}</td>
        <td><button onclick="showDetails('${escapeAttr(r.name)}')">Details</button></td>
      </tr>`).join("");
  }

  function scoreClass(n){
    if (n >= 85) return "score-excellent";
    if (n >= 70) return "score-good";
    if (n >= 50) return "score-average";
    return "score-poor";
  }

  function updateOverviewSummary(){
    const avg = a => a.length ? a.reduce((x,y)=>x+y,0)/a.length : 0;
    const m = Math.round(avg(state.results.map(r => r.marketScore)));
    const q = Math.round(avg(state.results.map(r => r.qualityRating)));
    const quickWins = state.results.filter(r => r.marketScore >= 80).length;

    const marketEl = $("#overallMarketScore");
    const profitEl = $("#overallProfit");
    const winsEl   = $("#quickWins");
    const optEl    = $("#optimizationLevel");
    if (marketEl) marketEl.textContent = `${m}/100`;
    if (profitEl) profitEl.textContent = `$${(q*10).toFixed(0)}`;
    if (winsEl)   winsEl.textContent   = `${quickWins} Found`;
    if (optEl)    optEl.textContent    = m >= 80 ? "High" : m >= 65 ? "Medium" : "Low";
  }

  window.showDetails = function(title){
    let modal = document.getElementById("detailsModal");
    if (!modal){
      modal = document.createElement("div");
      modal.id = "detailsModal";
      modal.className = "details-modal";
      modal.style.display = "flex";
      modal.innerHTML = `
        <div class="modal-content">
          <span class="close-modal" onclick="closeModal('detailsModal')">&times;</span>
          <h3>Detailed Analysis</h3>
          <div id="modalContent"></div>
        </div>`;
      document.body.appendChild(modal);
    } else {
      modal.style.display = "flex";
    }
    const row = state.results.find(r => r.name === title);
    $("#modalContent").innerHTML = row ? `
      <p><strong>File:</strong> ${escapeHTML(row.name)}</p>
      <p><strong>Niche:</strong> ${row.niche}</p>
      <p><strong>Market score:</strong> ${row.marketScore}</p>
      <p><strong>Quality rating:</strong> ${row.qualityRating}</p>
      <p><strong>Profit potential:</strong> ${row.profitPotential}</p>
      <p><strong>Best strategy:</strong> ${row.bestStrategy}</p>` : `<p>${escapeHTML(title)}</p>`;
  };
  window.closeModal = id => { const el = document.getElementById(id); if (el) el.style.display = "none"; };

  // ===== Profit calculator (same IDs you already use) =====
  window.calculatePLRProfit = function(){
    const cost  = parseFloat($("#calcPLRCost")?.value) || 0;
    const price = parseFloat($("#calcSellingPrice")?.value) || 0;
    const sales = parseInt($("#calcMonthlySales")?.value) || 0;
    const revenue = price * sales;
    const profit  = revenue - (cost * sales);
    const margin  = revenue ? Math.round((profit/revenue)*100) : 0;
    const roi     = cost ? ((price - cost)/cost).toFixed(1) : 0;
    const annual  = profit * 12;
    const set = (id, v) => { const el = document.getElementById(id); if (el) el.textContent = v; };
    set("calcMonthlyRevenue", "$"+revenue.toFixed(2));
    set("calcMonthlyProfit",  "$"+profit.toFixed(2));
    set("calcProfitMargin",   margin+"%");
    set("calcROIMultiplier",  roi+"x");
    set("calcAnnualProjection","$"+annual.toFixed(2));
    const box = $("#calculatorResults"); if (box) box.style.display = "block";
  };

  // ===== Export / Backup =====
  window.exportToCSV = function(){
    if (!state.results.length) return alert("No analysis results to export.");
    const headers = ["PLR Content","Niche","Strategy","Market Score","Quality Rating","Profit Potential","Best Strategy"];
    const rows = state.results.map(r => [r.name,r.niche,r.strategy,r.marketScore,r.qualityRating,r.profitPotential,r.bestStrategy]);
    const csv = [headers].concat(rows)
      .map(row => row.map(c => `"${String(c).replace(/"/g,'""')}"`).join(","))
      .join("\n");
    download("analysis.csv","text/csv",csv);
  };
  window.exportToPDF = function(){
    const html = $("#resultsTable")?.outerHTML || "<p>No data</p>";
    const w = window.open("","_blank");
    w.document.write(`<!doctype html><title>PLR Report</title>
      <style>body{font-family:Arial,sans-serif;padding:24px;}table{width:100%;border-collapse:collapse}th,td{border:1px solid #ddd;padding:8px}th{background:#f0f0f0}</style>
      <h1>PLR Analysis Report</h1>${html}`);
    w.document.close(); w.focus(); w.print();
  };
  function download(name,type,content){
    const blob = new Blob([content],{type});
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a"); a.href = url; a.download = name; a.click();
    URL.revokeObjectURL(url);
  }
  window.saveBackup = () => { localStorage.setItem("UPAT_backup_v1", JSON.stringify(state)); alert("Backup saved."); };
  window.loadBackup = () => {
    const raw = localStorage.getItem("UPAT_backup_v1");
    if (!raw) return alert("No backup found.");
    try {
      const s = JSON.parse(raw);
      state.files = s.files || [];
      state.results = s.results || [];
      updateFileCount();
      renderFileList();
      if (state.results.length) { renderResultsTable(); updateOverviewSummary(); }
      else { renderPlaceholderResults(); }
      alert("Backup loaded.");
    } catch (e) { console.error(e); alert("Backup could not be loaded."); }
  };

  // ===== Utilities =====
  function renderPlaceholderResults(){
    resultsBody.innerHTML = `
      <tr><td colspan="8" style="text-align:center; padding:40px; color:#666;">
        Files are ready. Click Start Analysis to generate results.
      </td></tr>`;
  }
  function escapeHTML(s=""){ return s.replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }
  function escapeAttr(s=""){ return s.replace(/['"]/g, c => c === '"' ? "&quot;" : "&#39;"); }

  // ===== Init =====
  [
    ["marketIntelligence","marketIntelligence"],
    ["qualityAssessment","qualityAssessment"],
    ["profitOptimization","profitOptimization"],
    ["bundleStrategies","bundleStrategies"],
    ["aiTitleGeneration","aiTitleGeneration"],
    ["etsySEO","etsySEO"],
    ["competitorTracking","competitorTracking"]
  ].forEach(([id,key]) => {
    const box = document.getElementById(id);
    if (box) {
      box.checked = true;
      on(box, "change", () => state.opts[key] = !!box.checked);
    }
  });

  updateFileCount();
  renderPlaceholderResults();
})();
</script>
</body>
</html>
